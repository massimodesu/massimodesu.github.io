<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Continue…</title>
  <style>
    :root{--bg:#0f1115;--card:#151821;--muted:#9aa3b2;--accent:#3b82f6;--border:#232838;--txt:#e8e8e8}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
    .card{width:100%;max-width:680px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:0 6px 30px rgba(0,0,0,.35)}
    h1{font-size:18px;margin:0 0 6px}
    .muted{font-size:12px;color:var(--muted);margin-bottom:12px}
    .ad-slot{display:flex;justify-content:center;margin:10px 0}
    .ad-300x250{width:300px;height:250px}
    .ad-320x50{width:320px;height:50px}
    .status{margin-top:8px;font-size:12px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Preparing your video…</h1>
    <div class="muted">Please wait a moment. You will be redirected automatically.</div>

    <!-- 300×250 на містку -->
    <div class="ad-slot">
      <div class="ad-300x250">
        <script>atOptions={key:'c493e0c00ad06c76089c47fdbb8fc023',format:'iframe',height:250,width:300,params:{}};</script>
        <script src="//www.highperformanceformat.com/c493e0c00ad06c76089c47fdbb8fc023/invoke.js"></script>
      </div>
    </div>

    <div class="status" id="status">Loading…</div>
  </div>
</div>

<!-- Sticky 320×50 (на містку теж заробляє) -->
<div style="position:fixed;left:0;right:0;bottom:0;padding:6px 0;background:rgba(15,17,21,.9);backdrop-filter:blur(6px);border-top:1px solid var(--border);display:flex;justify-content:center;z-index:50">
  <div class="ad-320x50">
    <script>atOptions={key:'4408059fb33cba75abbc00cec4c087af',format:'iframe',height:50,width:320,params:{}};</script>
    <script src="//www.highperformanceformat.com/4408059fb33cba75abbc00cec4c087af/invoke.js"></script>
  </div>
</div>

<script>
  // читаємо #v=...|delay=...
  function parseHash(){
    const raw=(location.hash||"").replace(/^#/,""); const out={}; if(!raw) return out;
    raw.split("|").forEach(p=>{const i=p.indexOf("="); if(i>0){out[p.slice(0,i).trim()]=decodeURIComponent(p.slice(i+1).trim());}});
    return out;
  }
  const p=parseHash(); const V=p.v||""; const D=Math.max(0,parseInt(p.delay||"5",10));
  const statusEl=document.getElementById('status');
  if(!V){ statusEl.textContent='Error: missing video URL.'; throw new Error('no V'); }

  // таймер і редірект
  const end=Date.now()+D*1000;
  (function tick(){
    const left=Math.max(0,Math.ceil((end-Date.now())/1000));
    statusEl.textContent='Opening video in '+left+'s…';
    if(Date.now()>=end){ go(); } else setTimeout(tick,250);
  })();
  function go(){
    try{location.assign(V);}catch(e){}
    try{location.replace(V);}catch(e){}
    try{window.open(V,'_self');}catch(e){}
  }
  // дублюючі спроби
  setTimeout(go,(D+0.6)*1000);
  setTimeout(go,(D+2.2)*1000);
  setTimeout(go,(D+4.2)*1000);
</script>
</body>
</html>
