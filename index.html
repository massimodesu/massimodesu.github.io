<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>18+ Video Access</title>

  <!-- –ü—Ä–µ–ª–æ–∞–¥ –ø–æ—Å—Ç–µ—Ä–∞ (TG —ñ–Ω–æ–¥—ñ "–ª—ñ–Ω–∏–≤–∏–π") -->
  <link rel="preload" as="image" href="https://massimodesu.github.io/three_girls_crop_1280x720.jpg" imagesrcset="https://massimodesu.github.io/three_girls_crop_1280x720.jpg 1280w">

  <style>
    :root { --bg:#0f1115; --card:#151821; --muted:#9aa3b2; --accent:#3b82f6; --border:#232838; --txt:#e8e8e8; }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--txt);margin:0;padding:16px;min-height:100vh;display:flex;align-items:center;justify-content:center}
    .card{max-width:700px;width:100%;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 6px 30px rgba(0,0,0,.35)}
    h1{font-size:20px;margin:0 0 6px}
    .handle{font-size:12px;color:#9aa3b2;margin:0 0 12px}
    .handle a{color:#9aa3b2;text-decoration:none}
    .badge{display:inline-block;font-size:11px;padding:4px 8px;border:1px solid var(--border);border-radius:999px;color:#9aa3b2;margin-bottom:10px}
    .preview{aspect-ratio:16/9;background:#0b0d12;border:1px dashed var(--border);border-radius:12px;margin:12px 0 8px;display:flex;align-items:center;justify-content:center;color:#94a3b8;font-size:13px;overflow:hidden}
    .preview img{width:100%;height:100%;object-fit:contain;display:block}
    .fine{font-size:12px;color:#9aa3b2;margin:8px 0 12px}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
    .btn{display:inline-block;padding:12px 18px;border-radius:12px;border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer}
    .btn.offer{background:#ef4444}
    .timer{margin-top:8px;font-size:12px;color:#9aa3b2}

    /* –±–∞–Ω–µ—Ä–Ω—ñ —Å–ª–æ—Ç–∏ */
    .slot300stack{display:flex;flex-direction:column;align-items:center;gap:12px;margin:12px 0}
    .slot300stack .box{width:300px;height:250px}
    .slot320{display:flex;justify-content:center;margin:14px 0 4px}
    .slot320 .box{width:320px;height:50px}
    @media (max-width:360px){ .slot300stack{transform:scale(.95);transform-origin:top center} }
  </style>
</head>
<body>
  <div class="card">
    <div class="badge">18+ content ‚Ä¢ adults only</div>
    <h1 id="title">Confirm 18+ to watch</h1>
    <div class="handle">channel: <a href="https://t.me/massimo_desu" target="_blank" rel="noopener">@massimo_desu</a></div>

    <!-- –ü—Ä–µ–≤'—é (–∞–±—Å–æ–ª—é—Ç–Ω–∏–π URL + —Ñ–æ–ª–±–µ–∫) -->
    <div class="preview" id="preview">Loading preview‚Ä¶</div>

    <!-- ===== TOP stack: Adsterra 300x250 + Adsterra 300x250 ===== -->
    <div class="slot300stack">
      <!-- Adsterra 300x250 (TOP A) -->
      <div class="box" id="ad_top_300_a">
        <script type="text/javascript">
          atOptions = { key:'c493e0c00ad06c76089c47fdbb8fc023', format:'iframe', height:250, width:300, params:{ psid:'top300_a' } };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/c493e0c00ad06c76089c47fdbb8fc023/invoke.js"></script>
      </div>

      <!-- Adsterra 300x250 (TOP B) -->
      <div class="box" id="ad_top_300_b">
        <script type="text/javascript">
          atOptions = { key:'c493e0c00ad06c76089c47fdbb8fc023', format:'iframe', height:250, width:300, params:{ psid:'top300_b' } };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/c493e0c00ad06c76089c47fdbb8fc023/invoke.js"></script>
      </div>
    </div>
    <!-- ===== /TOP stack ===== -->

    <p class="fine" id="note">Enjoy your time watching, dear anime connoisseurs, stay with usü´¶</p>

    <div class="actions">
      <button class="btn" id="watchBtn">Watch FULL</button>
      <a class="btn offer" id="offerBtn"
         href="https://www.revenuecpmgate.com/a0vdxj40u7?key=caff2ec1b619c7bc75892bfffdea43a6"
         target="_blank" rel="noopener">Extra 18+</a>
    </div>

    <div class="timer" id="status"></div>

    <!-- Bottom Adsterra 320x50 -->
    <div class="slot320">
      <div class="box" id="ad_bottom_320">
        <script type="text/javascript">
          atOptions = { key:'4408059fb33cba75abbc00cec4c087af', format:'iframe', height:50, width:320, params:{ psid:'bottom320' } };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/4408059fb33cba75abbc00cec4c087af/invoke.js"></script>
      </div>
    </div>
  </div>

  <script>
    // ---- –ü–ê–†–ê–ú–ï–¢–†–ò –ó –•–ï–®–ê ----
    function parseHash(){
      const raw=(location.hash||"").replace(/^#/,""); const out={}; if(!raw) return out;
      raw.split("|").forEach(p=>{const i=p.indexOf("="); if(i>0){out[p.slice(0,i).trim()]=decodeURIComponent(p.slice(i+1).trim());}});
      return out;
    }
    const p = parseHash();
    const V   = p.v   || "";
    const IMG = p.img || "";
    const D   = Math.max(0, parseInt(p.delay || "7", 10));

    if(p.t)   document.getElementById("title").textContent = p.t;
    if(p.btn) document.getElementById("watchBtn").textContent = p.btn;
    if(p.note)document.getElementById("note").textContent = p.note;
    if(p.offer){ const ob=document.getElementById("offerBtn"); ob.href=p.offer; if(p.offerText) ob.textContent=p.offerText; }

    // ---- –ü–û–°–¢–ï–† (–∂–æ—Ä—Å—Ç–∫–∏–π –∞–±—Å–æ–ª—é—Ç–Ω–∏–π + —Ñ–æ–ª–±–µ–∫) ----
    (function(){
      const ABS = "https://massimodesu.github.io/three_girls_crop_1280x720.jpg";
      const src = IMG || (ABS + "?v=1");
      const im = new Image();
      im.alt = "Cover";
      im.referrerPolicy = "no-referrer";
      im.onload = () => { const b=document.getElementById("preview"); b.innerHTML=""; b.appendChild(im); };
      im.onerror = () => { im.src = ABS + "?t=" + Date.now(); };
      im.src = src;
    })();

    const statusEl = document.getElementById("status");
    const btn = document.getElementById("watchBtn");
    if(!V){ btn.disabled=true; statusEl.textContent="Error: missing video URL (v= in the hash)."; }

    // ---- –†–ï–î–Ü–†–ï–ö–¢ –ë–ï–ó about:blank ----
    function go(url){
      try{ window.location.href = url; return; }catch(e){}
      try{ window.location.assign(url); return; }catch(e){}
      try{ window.location.replace(url); return; }catch(e){}
    }

    btn.addEventListener('click', ()=>{
      try{ localStorage.setItem('vgate_next', JSON.stringify({url:V, ts:Date.now()})); }catch(e){}
      const ua = navigator.userAgent||""; const isTG=/Telegram/i.test(ua);
      const delay = isTG ? Math.max(D,5) : D;

      const end = Date.now() + delay*1000;
      (function tick(){
        const left=Math.max(0,Math.ceil((end-Date.now())/1000));
        statusEl.textContent="Preparing your video‚Ä¶ "+left+"s";
        if(Date.now()>=end){ go(V); } else { setTimeout(tick,250); }
      })();

      setTimeout(()=>go(V),(delay+1.2)*1000);
    });

    // ---- –ê–í–¢–û-–†–ï–ó–Æ–ú–ï (–æ–ø—Ü—ñ–π–Ω–æ) ----
    (function(){
      try{
        const raw = localStorage.getItem('vgate_next');
        if(!raw) return;
        const obj = JSON.parse(raw);
        if(obj && obj.url && Date.now()-(obj.ts||0) < 2*60*1000 && !location.hash.includes('v=')){
          // –º–æ–∂–Ω–∞ –∞–≤—Ç–æ-–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è, —è–∫—â–æ —Ç—Ä–µ–±–∞ ‚Äî —Ä–æ–∑–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏:
          // window.location.href = obj.url;
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
